description: "Cookie consent dialog and accept button"
confidence_threshold: 0.9
timeout: 10.0
retry_count: 5
strategies:
  # Primary: Combined banner visibility + accept button
  - type: "css"
    selector: "#onetrust-banner-sdk:not(.ot-hide) #onetrust-accept-btn-handler"
    weight: 1.0
  # Secondary: Direct accept button
  - type: "css"
    selector: "#onetrust-accept-btn-handler"
    weight: 0.98
  # Tertiary: Banner visibility check
  - type: "css"
    selector: "#onetrust-banner-sdk:not(.ot-hide)"
    weight: 0.95
metadata:
  wait_for_element: true
  required_for_navigation: true
  wait_strategy: "visible_and_clickable"
  scroll_into_view: true
  retry_on_failure: true
  # Check cookie state before attempting
  cookie_check: "OptanonAlertBoxClosed"
  # Primary selectors for direct Playwright access (used by flow.py)
  primary_selectors:
    banner_container: "#onetrust-banner-sdk"
    accept_button: "#onetrust-accept-btn-handler"
    banner_visible_state: "visible"
    banner_timeout: 15000
  dom_state_indicators:
    unknown: ["cookie", "consent", "privacy"]
  known_blockers:
    - "dynamic_content_loading"
    - "javascript_delay"
    - "network_latency"
    - "async_sdk_loading"
    - "animation_in_progress"
  change_rationale: "Reduced from 13 to 3 strategies for faster resolution. Added primary_selectors in metadata for direct Playwright access."
  last_updated: "2026-02-14T20:45:00"
